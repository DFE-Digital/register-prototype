<h1 class="govuk-heading-l">{{pageHeading}}</h1>

{{ govukRadios({
  fieldset: {
    legend: {
      text: "Choose an action",
      classes: "govuk-fieldset__legend--m"
    }
  },
  hint: {
    text: ""
  },
  items: [
    {
      value: "Register for TRN",
      text: "Submit draft records for TRN"
    },
    {
      value: "Recommend for QTS",
      text: "Recommend trainees for QTS"
    }
  ]
} | decorateAttributes(data, "data.bulk.action")) }}

{% set enabledTrainingRoutes = data.settings.enabledTrainingRoutes %}

<h2 class="govuk-heading-m">Filter your trainees</h2>

<p class="govuk-body govuk-hint">You can choose specific trainees on the next page</p>

{# Only show route filter if there's more than 1 route #}
{% if enabledTrainingRoutes | length > 1 %}

  {% set routeItems = [] %}
  {% for route in enabledTrainingRoutes %}
    {% set routeItems = routeItems | push({
      text: route
    }) %}
  {% endfor %}
  {{ govukCheckboxes({
    fieldset: {
      legend: {
        text: "Routes",
        classes: "govuk-fieldset__legend--s"
      }
    },
    hint: {
      text: ""
    },
    items: routeItems
  } | decorateAttributes(data, "data.bulk.filters.trainingRoutes")) }}
  
{% endif %}

{% set subjectItems = [] %}

{# Default state - first value is 'all' #}
{% set subjectItems = subjectItems | push({
  value: "All subjects",
  text: "All subjects",
  selected: true if (not data.bulk.filters.subject or data.bulk.filters.subject ==  "All subjects")
}) %}

{# Remaining subjects #}
{% for subject in data.ittSubjects %}
  {% set subjectItems = subjectItems | push({
    value: subject,
    text: subject,
    selected: true if (subject == data.bulk.filters.subject)
  }) %}
{% endfor %}

{{ govukSelect({
  id: "subject-select",
  name: "bulk[filters][subject]",
  label: {
    text: "Subject",
    classes: "govuk-label--s"
  },
  items: subjectItems
}) }}

{{ govukButton({
  text: "Continue"
}) }}
