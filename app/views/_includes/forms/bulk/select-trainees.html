{# {% set records = data.records | where("route", "Provider-led") | where("status", "TRN received") | limitTo(100) | sortRecordsByLastName %} #}

{% set checkboxItems = [] %}

{% for trainee in filteredRecords  %}

  {% set checkboxLabelHtml %}
    {{trainee.personalDetails.fullName}} 
  {% endset %}

  {% set traineeHintHtml %}
    <span class="govuk-hint">{{trainee.programmeDetails.subject}}, {{trainee.route | lower}}</span>
    {{govukTag({
      text: trainee.status,
      classes: trainee.status | getStatusClass
    })}}
  {% endset %}

  {% set checkboxItems = checkboxItems | push({
    value: trainee.id,
    _text: trainee.personalDetails.fullName,
    checked: checked(selectedTrainees, trainee.id),
    html: checkboxLabelHtml,
    hint: {
      html: traineeHintHtml
    }
  }) %}
  
{% endfor %}

{{ govukCheckboxes({
  fieldset: {
    legend: {
      text: pageHeading,
      isPageHeading: true,
      classes: "govuk-fieldset__legend--l"
    }
  },
  hint: {
    text: ""
  },
  items: checkboxItems
} | decorateAttributes(data, "data.bulk.selectedTrainees")) }}

{{ govukButton({
  text: "Continue"
}) }}
