{% set placementCount = record.placement.items | length %}
{% set hasCommencementDate = record.trainingDetails.commencementDate | length > 0 %}
{% set minPlacementsRequired = data.settings.minPlacementsRequired %}
{% set needsPlacementDetails = record.placement.status != 'Complete' or placementCount < minPlacementsRequired %}

{{ hasCommencementDate | log }}

{% if record | hasOutstandingActions %}

    {{ govukErrorSummary({
      titleText: "You need to provide additional details before recording an outcome",
      classes: "notice-banner",
      errorList: [
        {
          text: "Confirm training placement details are complete" if placementCount >= minPlacementsRequired else "Add placement details",
          href: recordPath + "/placements/confirm" | addReferrer(referrer) if placementCount >= minPlacementsRequired else recordPath + "/placements/add" | addReferrer(referrer)
        } if needsPlacementDetails,
        {
          text: "Provide a start date",
          href: recordPath + "/trainee-start-date" | addReferrer(referrer)
        } if not hasCommencementDate
      ]
    }) }}

{% endif %}
